FROM node:16

WORKDIR /app

COPY package*.json ./

ENV CLIENT_ID d967d5d7fd864c3fb1874d9703220b1e
ENV CLIENT_SECRET fad04d4c71e740e9bd250cc0d8892087
ENV REDIRECT_URI http//4.230.17.8:5000/callback
ENV MONGO_URL mongodb+srv://mongo:2VxOzTHwBQf6o45D@cluster0.pbfpoj7.mongodb.net/?retryWrites=true&w=majority
ENV AUDIENCE spapi
ENV ISSUER https://dev-c8nkqrxqb26svuth.us.auth0.com/
ENV TOKEN_SIGNING_ALG RS256
ENV FRONTEND_BASE_URL http://4.230.17.8
ENV FRONTEND_REDIRECT_URL http://4.230.17.8/party/
ENV PORT_HTTPS 5000
ENV PORT_SOCKET 5001
ENV SPAPI_SPOTIFY_PLAYLIST_NAME = PARTY PLAYLIST
ENV SPAPI_PLAYLIST_REFRESH_TIME_MIN = 5000
ENV SPAPI_PLAYLIST_REFRESH_TIME_MAX = 10000

RUN npm ci

COPY . .

EXPOSE 5000
EXPOSE 5001
CMD [ "node", "index.js" ]